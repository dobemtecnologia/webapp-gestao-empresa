<div class="assistants-list">
  @if (selectedSectors().length === 0) {
    <div class="no-data">
      <p>Selecione pelo menos um setor no passo anterior.</p>
    </div>
  } @else if (availableAssistants().length === 0) {
    <div class="no-data">
      <p>Nenhum assistente dispon√≠vel para os setores selecionados.</p>
    </div>
  } @else {
    @for (setor of selectedSectors(); track setor.id) {
      @if (setor.assistentes && setor.assistentes.length > 0) {
        <div class="sector-section">
          <h4>{{ setor.nome }}</h4>
          @for (assistente of setor.assistentes; track assistente.id) {
            @if (assistente.ativo !== false) {
              <ion-item class="assistant-item">
                <ion-label>
                  <h3>{{ assistente.nome }}</h3>
                  <p>{{ assistente.descricao || 'Assistente especializado' }}</p>
                </ion-label>
                <div class="quantity-controls" slot="end">
                  <ion-button 
                    fill="clear" 
                    size="small"
                    (click)="decrementQuantity(assistente.id, setor.nome); $event.stopPropagation()"
                    [disabled]="getQuantity(assistente.id, setor.nome) === 0">
                    <ion-icon name="remove-outline"></ion-icon>
                  </ion-button>
                  <span class="quantity-value">{{ getQuantity(assistente.id, setor.nome) }}</span>
                  <ion-button 
                    fill="clear" 
                    size="small"
                    (click)="incrementQuantity(assistente.id, setor.nome); $event.stopPropagation()">
                    <ion-icon name="add-outline"></ion-icon>
                  </ion-button>
                </div>
              </ion-item>
            }
          }
        </div>
      }
    }
  }
</div>
