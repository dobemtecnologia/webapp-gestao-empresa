<div class="period-selection">
  <p class="period-intro">
    Escolha o período de contratação que melhor se encaixa no orçamento da sua empresa.
    Veja quanto você economiza em cada opção.
  </p>

  @if (carregando) {
    <div class="loading-wrapper">
      <ion-spinner></ion-spinner>
    </div>
  } @else if (periodCards.length === 0) {
    <p class="no-data">
      Ainda não foi possível calcular os valores por período. 
      Certifique-se de ter simulado o plano antes de chegar aqui.
    </p>
  } @else {
    <div class="periods-grid">
      @for (card of periodCards; track card.id) {
        <ion-card 
          class="period-card" 
          [class.selected]="isSelected(card.codigo)"
          [class.recommended]="card.recomendado"
          (click)="selectPeriod(card.codigo)">
          <ion-card-header>
            <div class="period-header">
              <ion-card-title>
                {{ card.nome }}
                @if (card.recomendado) {
                  <span class="recommended-badge">(Recomendado)</span>
                }
              </ion-card-title>
              @if (card.descontoPercentual > 0) {
                <div class="discount-badge">{{ formatarDesconto(card.descontoPercentual) }}</div>
              }
            </div>
          </ion-card-header>
          <ion-card-content>
            @if (card.descontoPercentual > 0) {
              <p class="price-original">
                {{ formatarMoeda(card.precoBruto) }} / {{ card.meses }} meses
              </p>
            }
            <p class="price-final">
              {{ formatarMoeda(card.precoComDesconto) }} / {{ card.meses }} meses
            </p>
            <p class="price-month">
              equivalente a {{ formatarMoeda(card.precoMensalEquivalente) }}/mês
            </p>

            <p class="period-description">
              {{ card.economiaLabel }}
            </p>
          </ion-card-content>
        </ion-card>
      }
    </div>
  }
</div>
